/*! For license information please see main.e7a9cc9b31362d9e2c99.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatetblazer("main",{"./app/components/Canvas/Home/index.js":(t,e,s)=>{s.r(e),s.d(e,{default:()=>n});var i=s("./node_modules/ogl/src/core/Transform.js"),r=s("./node_modules/ogl/src/extras/Plane.js"),h=s("./node_modules/gsap/index.js"),l=s("./node_modules/lodash/map.js"),o=s.n(l),a=s("./app/components/Canvas/Home/Media.js");class n{constructor({gl:t,scene:e,sizes:s}){this.gl=t,this.scene=e,this.sizes=s,this.group=new i.Transform,this.galleryElement=document.querySelector(".home__gallery"),this.mediaElements=document.querySelectorAll(".home__gallery__media__image"),this.x={current:0,target:0,ease:.1},this.y={current:0,target:0,ease:.1},this.scrollCurrent={x:0,y:0},this.scroll={x:0,y:0},this.speed={current:0,target:0,ease:.1},this.createGeometry(),this.createGallery(),this.group.setParent(e),this.show()}createGeometry(){this.geometry=new r.Plane(this.gl,{widthSegments:20,heightSegments:16})}createGallery(){this.medias=o()(this.mediaElements,((t,e)=>new a.default({element:t,geometry:this.geometry,index:e,gl:this.gl,scene:this.group,sizes:this.sizes})))}show(){o()(this.medias,(t=>t.show()))}hide(){o()(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.galleryBounds=this.galleryElement.getBoundingClientRect(),this.gallerySizes={width:this.galleryBounds.width/window.innerWidth*this.sizes.width,height:this.galleryBounds.height/window.innerHeight*this.sizes.height},this.scroll.x=this.x.target=0,this.scroll.y=this.y.target=0,o()(this.medias,(e=>e.onResize(t,this.scroll)))}onTouchDown({x:t,y:e}){this.speed.target=1,this.scrollCurrent.x=this.scroll.x,this.scrollCurrent.y=this.scroll.y}onTouchMove({x:t,y:e}){const s=t.start-t.end,i=e.start-e.end;this.x.target=this.scrollCurrent.x-s,this.y.target=this.scrollCurrent.y-i}onTouchUp({x:t,y:e}){this.speed.target=0}onWheel({pixelX:t,pixelY:e}){this.x.target+=t,this.y.target+=e}update(){if(!this.galleryBounds)return;const t=this.x.target-this.x.current,e=this.y.target-this.y.current;this.speed.target=.01*Math.sqrt(t*t+e*e),this.speed.current=h.default.utils.interpolate(this.speed.current,this.speed.target,this.speed.ease),this.x.current=h.default.utils.interpolate(this.x.current,this.x.target,this.x.ease),this.y.current=h.default.utils.interpolate(this.y.current,this.y.target,this.y.ease),this.scroll.x<this.x.current?this.x.direction="right":this.x.direction="left",this.scroll.y<this.y.current?this.y.direction="up":this.y.direction="down",this.scroll.x=this.x.current,this.scroll.y=this.y.current,o()(this.medias,((t,e)=>{const s=t.mesh.scale.x/2,i=.6*this.sizes.width;if("left"===this.x.direction){t.mesh.position.x+s<-i&&(t.extra.x+=this.gallerySizes.width,t.mesh.rotation.z=h.default.utils.random(.02*-Math.PI,.02*Math.PI))}else if("right"===this.x.direction){t.mesh.position.x-s>i&&(t.extra.x-=this.gallerySizes.width,t.mesh.rotation.z=h.default.utils.random(.02*-Math.PI,.02*Math.PI))}const r=t.mesh.scale.y/2,l=.6*this.sizes.height;if("up"===this.y.direction){t.mesh.position.y+r/2<-l&&(t.extra.y+=this.gallerySizes.height,t.mesh.rotation.z=h.default.utils.random(.02*-Math.PI,.02*Math.PI))}else if("down"===this.y.direction){t.mesh.position.y-r/2>l&&(t.extra.y-=this.gallerySizes.height,t.mesh.rotation.z=h.default.utils.random(.02*-Math.PI,.02*Math.PI))}t.update(this.scroll,this.speed.current)}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"919a9117bb8b40b8002f"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBT25ELEtBQUtjLE9BQVFkLEtBQUtlLE1BQU1OLFFBQVEsR0FFakQsQ0FNQTRELFVBQ0VyRSxLQUFLRixNQUFNd0UsWUFBWXRFLEtBQUtDLE1BQzlCLGtCQzdNRnNFLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YmxhemVyLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGJsYXplci93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcbmltcG9ydCBHU0FQIGZyb20gJ2dzYXAnXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXG5cbmltcG9ydCBNZWRpYSBmcm9tICcuL01lZGlhJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIHtcbiAgY29uc3RydWN0b3IoeyBnbCwgc2NlbmUsIHNpemVzIH0pIHtcbiAgICB0aGlzLmdsID0gZ2xcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLnNpemVzID0gc2l6ZXNcblxuICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcblxuICAgIHRoaXMuZ2FsbGVyeUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeScpXG4gICAgdGhpcy5tZWRpYUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX2dhbGxlcnlfX21lZGlhX19pbWFnZScpXG5cbiAgICB0aGlzLnggPSB7XG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgZWFzZTogMC4xLFxuICAgIH1cblxuICAgIHRoaXMueSA9IHtcbiAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBlYXNlOiAwLjEsXG4gICAgfVxuXG4gICAgdGhpcy5zY3JvbGxDdXJyZW50ID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgfVxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgfVxuXG4gICAgLy8gc2Nyb2xsaW5nIHNwZWVkIHBhc3NlZCB0byB0aGUgdmVydGV4IHNoYWRlclxuICAgIHRoaXMuc3BlZWQgPSB7XG4gICAgICBjdXJyZW50OiAwLFxuICAgICAgdGFyZ2V0OiAwLFxuICAgICAgZWFzZTogMC4xLCAvLyBsZXJwXG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIFdlYkdMIGVsZW1lbnRzXG4gICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXG4gICAgdGhpcy5jcmVhdGVHYWxsZXJ5KClcbiAgICB0aGlzLmdyb3VwLnNldFBhcmVudChzY2VuZSlcblxuICAgIHRoaXMuc2hvdygpXG4gIH1cblxuICBjcmVhdGVHZW9tZXRyeSgpIHtcbiAgICB0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wsIHtcbiAgICAgIHdpZHRoU2VnbWVudHM6IDIwLFxuICAgICAgaGVpZ2h0U2VnbWVudHM6IDE2LFxuICAgIH0pXG4gIH1cblxuICBjcmVhdGVHYWxsZXJ5KCkge1xuICAgIHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFFbGVtZW50cywgKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IE1lZGlhKHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvbWV0cnksXG4gICAgICAgIGluZGV4LFxuICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgc2NlbmU6IHRoaXMuZ3JvdXAsIC8vIGRpc3BsYXkgdGhlIGdlb21ldHJ5IGluIHRoZSBzY2VuZVxuICAgICAgICBzaXplczogdGhpcy5zaXplcyxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS1cbiAgIC0tLS0tLS0tLS0tLSBBTklNQVRJT05TXG4gICAtLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8vIGltYWdlcyBmYWRlIGluIGFuZCBvdXQgZWZmZWN0XG4gIHNob3coKSB7XG4gICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEpID0+IG1lZGlhLnNob3coKSlcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgbWFwKHRoaXMubWVkaWFzLCAobWVkaWEpID0+IG1lZGlhLmhpZGUoKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS1cbiAgIC0tLS0tLS0tLS0tLSBFVkVOVFNcbiAgIC0tLS0tLS0tLS0tLS0tICovXG5cbiAgb25SZXNpemUoZXZlbnQpIHtcbiAgICB0aGlzLnNpemVzID0gZXZlbnQuc2l6ZXNcblxuICAgIHRoaXMuZ2FsbGVyeUJvdW5kcyA9IHRoaXMuZ2FsbGVyeUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgLy8gY3JlYXRlIGdhbGxlcnkgYm91bmRzXG4gICAgdGhpcy5nYWxsZXJ5U2l6ZXMgPSB7XG4gICAgICB3aWR0aDogKHRoaXMuZ2FsbGVyeUJvdW5kcy53aWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIHRoaXMuc2l6ZXMud2lkdGgsIC8vIGdldCBnYWxsZXJ5IG5ldCB3aWR0aCBpbiB3ZWJnbCBlbnZpcm9ubWVudFxuICAgICAgaGVpZ2h0OiAodGhpcy5nYWxsZXJ5Qm91bmRzLmhlaWdodCAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiB0aGlzLnNpemVzLmhlaWdodCxcbiAgICB9XG5cbiAgICB0aGlzLnNjcm9sbC54ID0gdGhpcy54LnRhcmdldCA9IDBcbiAgICB0aGlzLnNjcm9sbC55ID0gdGhpcy55LnRhcmdldCA9IDBcblxuICAgIG1hcCh0aGlzLm1lZGlhcywgKG1lZGlhKSA9PiBtZWRpYS5vblJlc2l6ZShldmVudCwgdGhpcy5zY3JvbGwpKVxuICB9XG5cbiAgb25Ub3VjaERvd24oeyB4LCB5IH0pIHtcbiAgICB0aGlzLnNwZWVkLnRhcmdldCA9IDFcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQueCA9IHRoaXMuc2Nyb2xsLnhcbiAgICB0aGlzLnNjcm9sbEN1cnJlbnQueSA9IHRoaXMuc2Nyb2xsLnlcbiAgfVxuXG4gIG9uVG91Y2hNb3ZlKHsgeCwgeSB9KSB7XG4gICAgY29uc3QgeERpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG4gICAgY29uc3QgeURpc3RhbmNlID0geS5zdGFydCAtIHkuZW5kXG5cbiAgICB0aGlzLngudGFyZ2V0ID0gdGhpcy5zY3JvbGxDdXJyZW50LnggLSB4RGlzdGFuY2VcbiAgICB0aGlzLnkudGFyZ2V0ID0gdGhpcy5zY3JvbGxDdXJyZW50LnkgLSB5RGlzdGFuY2VcbiAgfVxuXG4gIG9uVG91Y2hVcCh7IHgsIHkgfSkge1xuICAgIHRoaXMuc3BlZWQudGFyZ2V0ID0gMFxuICB9XG5cbiAgb25XaGVlbCh7IHBpeGVsWCwgcGl4ZWxZIH0pIHtcbiAgICB0aGlzLngudGFyZ2V0ICs9IHBpeGVsWFxuICAgIHRoaXMueS50YXJnZXQgKz0gcGl4ZWxZXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tXG4gICAtLS0tLS0tLS0tLS0gTE9PUFMgJiBGUkFNRVNcbiAgIC0tLS0tLS0tLS0tLS0tICovXG4gIHVwZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuZ2FsbGVyeUJvdW5kcykgcmV0dXJuXG5cbiAgICAvLyBjYWxjdWxhdGUgbW91c2UgbW92ZW1lbnQgZGlzdGFuY2UgYW5kIHBhc3MgaXQgdG8gdXNwZWVkIHZhbHVlIGluIHZlcnRleCBzaGFkZXJcbiAgICBjb25zdCBhID0gdGhpcy54LnRhcmdldCAtIHRoaXMueC5jdXJyZW50XG4gICAgY29uc3QgYiA9IHRoaXMueS50YXJnZXQgLSB0aGlzLnkuY3VycmVudFxuICAgIHRoaXMuc3BlZWQudGFyZ2V0ID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpICogMC4wMVxuICAgIHRoaXMuc3BlZWQuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUodGhpcy5zcGVlZC5jdXJyZW50LCB0aGlzLnNwZWVkLnRhcmdldCwgdGhpcy5zcGVlZC5lYXNlKVxuXG4gICAgLy8gc21vb3RoIGVmZmVjdFxuICAgIHRoaXMueC5jdXJyZW50ID0gR1NBUC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnguY3VycmVudCwgdGhpcy54LnRhcmdldCwgdGhpcy54LmVhc2UpXG4gICAgdGhpcy55LmN1cnJlbnQgPSBHU0FQLnV0aWxzLmludGVycG9sYXRlKHRoaXMueS5jdXJyZW50LCB0aGlzLnkudGFyZ2V0LCB0aGlzLnkuZWFzZSlcblxuICAgIGlmICh0aGlzLnNjcm9sbC54IDwgdGhpcy54LmN1cnJlbnQpIHtcbiAgICAgIHRoaXMueC5kaXJlY3Rpb24gPSAncmlnaHQnXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueC5kaXJlY3Rpb24gPSAnbGVmdCdcbiAgICB9XG4gICAgaWYgKHRoaXMuc2Nyb2xsLnkgPCB0aGlzLnkuY3VycmVudCkge1xuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICd1cCdcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy55LmRpcmVjdGlvbiA9ICdkb3duJ1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHRoaXMueC5kaXJlY3Rpb24pO1xuXG4gICAgdGhpcy5zY3JvbGwueCA9IHRoaXMueC5jdXJyZW50XG4gICAgdGhpcy5zY3JvbGwueSA9IHRoaXMueS5jdXJyZW50XG5cbiAgICBtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHNjYWxlWCA9IG1lZGlhLm1lc2guc2NhbGUueCAvIDJcbiAgICAgIGNvbnN0IG9mZnNldFggPSB0aGlzLnNpemVzLndpZHRoICogMC42XG4gICAgICAvLyBob3Jpem9udGFsIHNjcm9sbFxuICAgICAgaWYgKHRoaXMueC5kaXJlY3Rpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICBjb25zdCB4ID0gbWVkaWEubWVzaC5wb3NpdGlvbi54ICsgc2NhbGVYIC8vY2hlY2sgdGhlIHJpZ2h0IGVkZ2Ugb2YgdGhlIGltYWdlXG4gICAgICAgIGlmICh4IDwgLW9mZnNldFgpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS54ICs9IHRoaXMuZ2FsbGVyeVNpemVzLndpZHRoIC8vIG1vdmUgdG8gdGhlIHJpZ2h0IHNpZGVcbiAgICAgICAgICBtZWRpYS5tZXNoLnJvdGF0aW9uLnogPSBHU0FQLnV0aWxzLnJhbmRvbSgtTWF0aC5QSSAqIDAuMDIsIE1hdGguUEkgKiAwLjAyKVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMueC5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgY29uc3QgeCA9IG1lZGlhLm1lc2gucG9zaXRpb24ueCAtIHNjYWxlWCAvL2NoZWNrIHRoZSBsZWZ0IGVkZ2Ugb2YgdGhlIGltYWdlXG4gICAgICAgIGlmICh4ID4gb2Zmc2V0WCkge1xuICAgICAgICAgIG1lZGlhLmV4dHJhLnggLT0gdGhpcy5nYWxsZXJ5U2l6ZXMud2lkdGggLy8gbW92ZSB0byB0aGUgbGVmdCBzaWRlXG4gICAgICAgICAgbWVkaWEubWVzaC5yb3RhdGlvbi56ID0gR1NBUC51dGlscy5yYW5kb20oLU1hdGguUEkgKiAwLjAyLCBNYXRoLlBJICogMC4wMilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzY2FsZVkgPSBtZWRpYS5tZXNoLnNjYWxlLnkgLyAyXG4gICAgICBjb25zdCBvZmZzZXRZID0gdGhpcy5zaXplcy5oZWlnaHQgKiAwLjZcbiAgICAgIC8vIHZlcnRpY2FsIHNjcm9sbFxuICAgICAgaWYgKHRoaXMueS5kaXJlY3Rpb24gPT09ICd1cCcpIHtcbiAgICAgICAgY29uc3QgeSA9IG1lZGlhLm1lc2gucG9zaXRpb24ueSArIHNjYWxlWSAvIDIgLy9jaGVjayB0aGUgYm90dG9tIGVkZ2Ugb2YgdGhlIGltYWdlXG4gICAgICAgIGlmICh5IDwgLW9mZnNldFkpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS55ICs9IHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodFxuICAgICAgICAgIG1lZGlhLm1lc2gucm90YXRpb24ueiA9IEdTQVAudXRpbHMucmFuZG9tKC1NYXRoLlBJICogMC4wMiwgTWF0aC5QSSAqIDAuMDIpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy55LmRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XG4gICAgICAgIGNvbnN0IHkgPSBtZWRpYS5tZXNoLnBvc2l0aW9uLnkgLSBzY2FsZVkgLyAyIC8vY2hlY2sgdGhlIHRvcCBlZGdlIG9mIHRoZSBpbWFnZVxuICAgICAgICBpZiAoeSA+IG9mZnNldFkpIHtcbiAgICAgICAgICBtZWRpYS5leHRyYS55IC09IHRoaXMuZ2FsbGVyeVNpemVzLmhlaWdodFxuICAgICAgICAgIG1lZGlhLm1lc2gucm90YXRpb24ueiA9IEdTQVAudXRpbHMucmFuZG9tKC1NYXRoLlBJICogMC4wMiwgTWF0aC5QSSAqIDAuMDIpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gdXBkYXRlIHNjcm9sbCBwb3NpdGlvblxuICAgICAgbWVkaWEudXBkYXRlKHRoaXMuc2Nyb2xsLCB0aGlzLnNwZWVkLmN1cnJlbnQpXG4gICAgfSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS1cbiAgIC0tLS0tLS0tLS0tLSBERVNUUk9ZXG4gICAtLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmdyb3VwKVxuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI5MTlhOTExN2JiOGI0MGI4MDAyZlwiKSJdLCJuYW1lcyI6WyJIb21lIiwiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0aGlzIiwiZ3JvdXAiLCJUcmFuc2Zvcm0iLCJnYWxsZXJ5RWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lZGlhRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwieCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJlYXNlIiwieSIsInNjcm9sbEN1cnJlbnQiLCJzY3JvbGwiLCJzcGVlZCIsImNyZWF0ZUdlb21ldHJ5IiwiY3JlYXRlR2FsbGVyeSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwid2lkdGhTZWdtZW50cyIsImhlaWdodFNlZ21lbnRzIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJtZWRpYSIsImhpZGUiLCJvblJlc2l6ZSIsImV2ZW50IiwiZ2FsbGVyeUJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImdhbGxlcnlTaXplcyIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0Iiwib25Ub3VjaERvd24iLCJvblRvdWNoTW92ZSIsInhEaXN0YW5jZSIsInN0YXJ0IiwiZW5kIiwieURpc3RhbmNlIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWCIsInBpeGVsWSIsInVwZGF0ZSIsImEiLCJiIiwiTWF0aCIsInNxcnQiLCJHU0FQIiwiZGlyZWN0aW9uIiwic2NhbGVYIiwibWVzaCIsInNjYWxlIiwib2Zmc2V0WCIsInBvc2l0aW9uIiwiZXh0cmEiLCJyb3RhdGlvbiIsInoiLCJQSSIsInNjYWxlWSIsIm9mZnNldFkiLCJkZXN0cm95IiwicmVtb3ZlQ2hpbGQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=